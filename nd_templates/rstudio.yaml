---
name: rstudio
url: https://rocker-project.org/
binaries:
  urls:
    latest: https://hub.docker.com/r/rocker/rstudio
  arguments:
    optional:
      addons: ""
      rprofile: ""
  instructions: |
    echo "Starting build of RStudio image"
    R -e "install.packages('remotes')"
    R -e "install.packages('DR.SC')"
    R -e "install.packages('Seurat')"
    R -e "BiocManager::install('Rsamtools')"
    R -e "BiocManager::install('scater')"
    R -e "BiocManager::install('TFBSTools')"
    R -e "BiocManager::install('HDF5Array')"
    R -e "BiocManager::install('rtracklayer')"
    R -e "BiocManager::install('GenomicFeatures')"
    R -e "install.packages('PRECAST')"
    R -e "remotes::install_github('satijalab/azimuth', ref = 'master')"
    R -e "BiocManager::install('Banksy')"
    {% if self.addons %}
    install2.r --error --skipinstalled --ncpus -1 {{ self.addons }}
    rm -rf /tmp/downloaded_packages
    {% endif %}
    {% if self.rprofile %}
    echo '{{ self.rprofile }}' > /usr/local/lib/R/etc/Rprofile.site
    {% endif %}
  env:
    TZ: "America/New_York"